
# Instalação jitsi
 PARA SER OPEN TEM QUE SER ACESSÍVEL.

URL: https://jitsi.github.io/handbook/docs/devops-guide/devops-guide-quickstart

Hardware: google cloud

setar dns registro.br

meet.vhtel.eng.br - 34.66.27.251)

sudo hostnamectl set-hostname meet.vhtel.eng.br


sudo apt-get install ufw wget

Regras


80 TCP - for SSL certificate verification / renewal with Let's Encrypt
443 TCP - for general access to Jitsi Meet
4443 TCP - for fallback network video/audio communications (when UDP is blocked for example)
10000 UDP - for general network video/audio communications
22 TCP - if you access you server using SSH (change the port accordingly if it's not 22)



sudo ufw status verbose


Status: active
Logging: on (low)
Default: deny (incoming), allow (outgoing), disabled (routed)
New profiles: skip

To                         Action      From
--                         ------      ----
80/tcp                     ALLOW IN    Anywhere                  
443/tcp                    ALLOW IN    Anywhere                  
4443/tcp                   ALLOW IN    Anywhere                  
10000/udp                  ALLOW IN    Anywhere                  
22/tcp                     ALLOW IN    Anywhere                  
80/tcp (v6)                ALLOW IN    Anywhere (v6)             
443/tcp (v6)               ALLOW IN    Anywhere (v6)             
4443/tcp (v6)              ALLOW IN    Anywhere (v6)             
10000/udp (v6)             ALLOW IN    Anywhere (v6)             
22/tcp (v6)                ALLOW IN    Anywhere (v6)       



configurar rotas de nat no google cloud: atenção para as tags que devem ser adicionadas à vm e à regras para devida efetivação


Instalar jitsi

sudo apt install jitsi-meet

Instalar certificados ssl

sudo /usr/share/jitsi-meet/scripts/install-letsencrypt-cert.sh


configurar logs e alertas da vm no gcloud


manter arquivo de configuração das instância do google cloud - git privado ?


Alerta de cpu

stress para stressar a máquina
https://superuser.com/questions/443406/how-can-i-produce-high-cpu-load-on-a-linux-server


----------- histórico de comandos


1  20/05/20 00:17:05 ls
    2  20/05/20 00:17:05 cat /etc/issue
    3  20/05/20 00:17:05 sudo apt-get update
    4  20/05/20 00:17:05 sudo apt-get upgrade
    5  20/05/20 00:17:05 sudo aptitude install nmap iperf3 git htop screen dnsutils ethtool ansible speedtest-cli prips vnstat speedometer bash-completion software-properties-common cur
    6  20/05/20 00:17:05 sudo aptitude install nmap iperf3 git htop screen dnsutils ethtool ansible speedtest-cli prips vnstat speedometer bash-completion software-properties-common curl
    7  20/05/20 00:17:05 sudo apt-get install nmap iperf3 git htop screen dnsutils ethtool ansible speedtest-cli prips vnstat speedometer bash-completion software-properties-common curl
    8  20/05/20 00:17:05 echo 'export HISTTIMEFORMAT="%d/%m/%y %T "' >> ~/.bashrc
    9  19/05/20 22:11:24 ls
   10  19/05/20 22:11:27 bash
   11  19/05/20 22:11:44 sudo apt-get install     apt-transport-https     ca-certificates     curl     gnupg-agent     software-properties-common
   12  19/05/20 22:11:55 sudo timedatectl set-timezone 'America/Sao_Paulo'
   13  19/05/20 22:12:09 sudo apt-get install unattended-upgrades apt-listchanges
   14  19/05/20 22:12:17 sudo apt-get autoremove
   15  19/05/20 22:12:23 sudo apt-get clean
   16  19/05/20 22:12:29 ls
   17  19/05/20 22:12:31 free
   18  19/05/20 22:12:32 htop
   19  19/05/20 22:14:36 sudo apt install apt-transport-https
   20  19/05/20 22:14:43 sudo apt-add-repository universe
   21  19/05/20 22:17:40 sudo hostnamectl set-hostname meet.vhtel.eng.br
   22  19/05/20 22:17:59 ping meet.vhtel.eng.br
   23  19/05/20 22:18:28 curl https://download.jitsi.org/jitsi-key.gpg.key | sudo sh -c 'gpg --dearmor > /usr/share/keyrings/jitsi-keyring.gpg'
   24  19/05/20 22:18:28 echo 'deb [signed-by=/usr/share/keyrings/jitsi-keyring.gpg] https://download.jitsi.org stable/' | sudo tee /etc/apt/sources.list.d/jitsi-stable.list > /dev/null
   25  19/05/20 22:18:37 sudo apt update
   26  19/05/20 22:18:53 sudo apt-get update
   27  19/05/20 22:18:59 sudo apt-get install aptitu
   28  19/05/20 22:19:01 sudo apt-get install aptitude
   29  19/05/20 22:19:28 sudo aptitude update
   30  19/05/20 22:19:37 sudo aptitude full-upgrade
   31  19/05/20 22:20:05 sudo apt-get autoremove
   32  19/05/20 22:20:40 sudo ufw allow 80/tcp
   33  19/05/20 22:20:47 sudo apt-get install ufw
   34  19/05/20 22:20:56 sudo ufw allow 80/tcp
   35  19/05/20 22:21:23 sudo ufw allow 443/tcp
   36  19/05/20 22:21:31 sudo ufw allow 4443/tcp
   37  19/05/20 22:21:37 sudo ufw allow 10000/udp
   38  19/05/20 22:21:51 sudo ufw allow 22/tcp
   39  19/05/20 22:21:57 sudo ufw enable
   40  19/05/20 22:22:13 sudo ufw status verbose
   41  19/05/20 22:27:44 sudo apt install jitsi-meet
   42  19/05/20 22:30:25 sudo /usr/share/jitsi-meet/scripts/install-letsencrypt-cert.sh
   43  19/05/20 22:31:44 sudo nano /usr/share/jitsi-meet/scripts/install-letsencrypt-cert.sh
   44  19/05/20 22:32:27 sudo /usr/share/jitsi-meet/scripts/install-letsencrypt-cert.sh
   45  19/05/20 22:34:27 /usr/share/jitsi-meet/scripts/install-letsencrypt-cert.sh
   46  19/05/20 22:34:38 sudo sh /usr/share/jitsi-meet/scripts/install-letsencrypt-cert.sh
   47  19/05/20 22:36:01 sudo reboot
   48  19/05/20 22:42:59 ls
   49  19/05/20 22:43:05 sudo sh /usr/share/jitsi-meet/scripts/install-letsencrypt-cert.sh
   50  19/05/20 22:43:22 sudo /usr/share/jitsi-meet/scripts/install-letsencrypt-cert.sh
   51  19/05/20 22:43:38 sudo apt-get install wget
   52  19/05/20 22:43:54 sudo /usr/share/jitsi-meet/scripts/install-letsencrypt-cert.sh
   53  19/05/20 22:50:21 vnstat
   54  19/05/20 22:58:12 sudo apt-get install stree
   55  19/05/20 22:58:15 sudo apt-get install strees
   56  19/05/20 22:58:22 sudo apt-get install stress
   57  19/05/20 22:58:28 man stress
   58  19/05/20 22:58:47 stress -10
   59  19/05/20 22:58:51 stress -t 10
   60  19/05/20 22:58:59 htop
   61  19/05/20 22:59:24 stress --cpu 1 --io 4 --vm 2 --vm-bytes 128M --timeout 10s
   62  19/05/20 22:59:36 htop
   63  19/05/20 23:00:11 stress --cpu 1 --io 4 --vm 2 --vm-bytes 128M --timeout 30
   64  19/05/20 23:01:19 stress --cpu 1 --io 4 --vm 2 --vm-bytes 128M --timeout 400
   65  19/05/20 23:00:04 htop
   66  19/05/20 23:00:44 ping g1.com.br
   67  19/05/20 23:01:03 htop



references

https://www.scaleway.com/en/docs/setting-up-jitsi-meet-videoconferencing-on-debian-stretch/
